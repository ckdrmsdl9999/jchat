% Document title: ./ChatClient.java

\input highlight.sty

{
\tt
{\hlstd }{\hlkwa package }{\hlstd client}{\hlsym ;}\leavevmode\par
{\hlstd }\leavevmode\par
{\hlkwa import }{\hlstd ocsf}{\hlsym .}{\hlstd client}{\hlsym .*;}\leavevmode\par
{\hlstd }{\hlkwa import }{\hlstd common}{\hlsym .*;}\leavevmode\par
{\hlstd }{\hlkwa import }{\hlstd java}{\hlsym .}{\hlstd io}{\hlsym .*;}\leavevmode\par
{\hlstd }\leavevmode\par
{\hlkwa public class }{\hlstd ChatClient }{\hlkwa extends }{\hlstd AbstractClient}{\hlsym $\{$}\leavevmode\par
{\hlstd \leavevmode\par
	ChatIF clientUI}{\hlsym ;}\leavevmode\par
{\hlstd 	}{\hlkwb boolean }{\hlstd isLogin}{\hlsym ;}\leavevmode\par
{\hlstd \leavevmode\par
	}{\hlkwa public }{\hlstd }{\hlkwd ChatClient}{\hlstd }{\hlsym (}{\hlstd }{\hlkwc String }{\hlstd host}{\hlsym , }{\hlstd }{\hlkwb int }{\hlstd port}{\hlsym , }{\hlstd ChatIF clientUI}{\hlsym ) }{\hlstd }{\hlkwa throws }{\hlstd }{\hlkwc IOException}{\hlstd }{\hlsym $\{$}\leavevmode\par
{\hlstd }{\hlstd\ \ }{\hlstd }{\hlkwa super}{\hlstd }{\hlsym (}{\hlstd host}{\hlsym , }{\hlstd port}{\hlsym );}\leavevmode\par
{\hlstd }{\hlstd\ \ }{\hlstd }{\hlkwa this}{\hlstd }{\hlsym .}{\hlstd clientUI }{\hlsym $\mathord{=}$ }{\hlstd clientUI}{\hlsym ;}\leavevmode\par
{\hlstd }{\hlstd\ \ }{\hlstd isLogin}{\hlsym $\mathord{=}$}{\hlstd false}{\hlsym ;}\leavevmode\par
{\hlstd }{\hlstd\ \ }{\hlstd }{\hlkwd openConnection}{\hlstd }{\hlsym ();}\leavevmode\par
{\hlstd }{\hlstd\ \ }{\hlstd clientUI}{\hlsym .}{\hlstd }{\hlkwd display}{\hlstd }{\hlsym (}{\hlstd }{\hlstr "You current status is not logged in."}{\hlstd }{\hlsym );}\leavevmode\par
{\hlstd 	}{\hlsym $\}$}\leavevmode\par
{\hlstd \leavevmode\par
	}{\hlkwa public }{\hlstd }{\hlkwb void }{\hlstd }{\hlkwd handleMessageFromServer}{\hlstd }{\hlsym (}{\hlstd }{\hlkwc Object }{\hlstd msg}{\hlsym )$\{$}\leavevmode\par
{\hlstd }{\hlstd\ \ }{\hlstd }{\hlkwa if}{\hlstd }{\hlsym (}{\hlstd msg}{\hlsym .}{\hlstd }{\hlkwd toString}{\hlstd }{\hlsym ().}{\hlstd }{\hlkwd substring}{\hlstd }{\hlsym (}{\hlstd }{\hlnum 0}{\hlstd }{\hlsym ,}{\hlstd }{\hlnum 7}{\hlstd }{\hlsym ).}{\hlstd }{\hlkwd equals}{\hlstd }{\hlsym (}{\hlstd }{\hlstr "Welcome"}{\hlstd }{\hlsym ))}\leavevmode\par
{\hlstd }{\hlstd\ \ \ }{\hlstd }{\hlkwa this}{\hlstd }{\hlsym .}{\hlstd isLogin}{\hlsym $\mathord{=}$}{\hlstd true}{\hlsym ;}\leavevmode\par
{\hlstd }{\hlstd\ \ }{\hlstd clientUI}{\hlsym .}{\hlstd }{\hlkwd display}{\hlstd }{\hlsym (}{\hlstd msg}{\hlsym .}{\hlstd }{\hlkwd toString}{\hlstd }{\hlsym ());}\leavevmode\par
{\hlstd 	}{\hlsym $\}$}\leavevmode\par
{\hlstd \leavevmode\par
	}{\hlkwa public }{\hlstd }{\hlkwb void }{\hlstd }{\hlkwd handleMessageFromClientUI}{\hlstd }{\hlsym (}{\hlstd }{\hlkwc String }{\hlstd message}{\hlsym )$\{$}\leavevmode\par
{\hlstd }{\hlstd\ \ }{\hlstd }{\hlkwa if}{\hlstd }{\hlsym (}{\hlstd message}{\hlsym .}{\hlstd }{\hlkwd charAt}{\hlstd }{\hlsym (}{\hlstd }{\hlnum 0}{\hlstd }{\hlsym )$\mathord{=}$$\mathord{=}$}{\hlstd }{\hlstr '\#'}{\hlstd }{\hlsym )$\{$}\leavevmode\par
{\hlstd }{\hlstd\ \ \ }{\hlstd }{\hlkwc String}{\hlstd }{\hlsym [] }{\hlstd command}{\hlsym ;}\leavevmode\par
{\hlstd }{\hlstd\ \ \ }{\hlstd command }{\hlsym $\mathord{=}$ }{\hlstd message}{\hlsym .}{\hlstd }{\hlkwd split}{\hlstd }{\hlsym (}{\hlstd }{\hlstr "}{\hlesc $\backslash$$\backslash$}{\hlstr s$\mathord{+}$"}{\hlstd }{\hlsym );}\leavevmode\par
{\hlstd }{\hlstd\ \ \ }{\hlstd }{\hlkwa this}{\hlstd }{\hlsym .}{\hlstd }{\hlkwd handleCommandFromClientUI}{\hlstd }{\hlsym (}{\hlstd command}{\hlsym );}\leavevmode\par
{\hlstd }{\hlstd\ \ }{\hlstd }{\hlsym $\}$}\leavevmode\par
{\hlstd }{\hlstd\ \ }{\hlstd }{\hlkwa else}{\hlstd }{\hlsym $\{$}\leavevmode\par
{\hlstd }{\hlstd\ \ \ }{\hlstd }{\hlkwa if}{\hlstd }{\hlsym (}{\hlstd isLogin}{\hlsym )$\{$}\leavevmode\par
{\hlstd }{\hlstd\ \ \ \ }{\hlstd }{\hlkwa try}{\hlstd }{\hlsym $\{$}\leavevmode\par
{\hlstd }{\hlstd\ \ \ \ \ \ }{\hlstd }{\hlkwa this}{\hlstd }{\hlsym .}{\hlstd }{\hlkwd sendToServer}{\hlstd }{\hlsym (}{\hlstd message}{\hlsym );}\leavevmode\par
{\hlstd }{\hlstd\ \ \ \ }{\hlstd }{\hlsym $\}$}\leavevmode\par
{\hlstd \leavevmode\par
}{\hlstd\ \ \ \ }{\hlstd }{\hlkwa catch}{\hlstd }{\hlsym (}{\hlstd }{\hlkwc IOException }{\hlstd e}{\hlsym )$\{$}\leavevmode\par
{\hlstd }{\hlstd\ \ \ \ \ \ }{\hlstd clientUI}{\hlsym .}{\hlstd }{\hlkwd display}{\hlstd }{\hlsym (}{\hlstd }{\hlstr "$\mathord{<}$System$\mathord{>}$ Could not send message to server.}{\hlstd\ \ }{\hlstr Terminating client."}{\hlstd }{\hlsym );}\leavevmode\par
{\hlstd }{\hlstd\ \ \ \ \ \ }{\hlstd }{\hlkwd quit}{\hlstd }{\hlsym ();}\leavevmode\par
{\hlstd }{\hlstd\ \ \ \ }{\hlstd }{\hlsym $\}$}\leavevmode\par
{\hlstd }{\hlstd\ \ \ }{\hlstd }{\hlsym $\}$}\leavevmode\par
{\hlstd }{\hlstd\ \ \ }{\hlstd }{\hlkwa else }{\hlstd clientUI}{\hlsym .}{\hlstd }{\hlkwd display}{\hlstd }{\hlsym (}{\hlstd }{\hlstr "$\mathord{<}$System$\mathord{>}$ Not Loged in"}{\hlstd }{\hlsym );}\leavevmode\par
{\hlstd }{\hlstd\ \ }{\hlstd }{\hlsym $\}$}\leavevmode\par
{\hlstd 	}{\hlsym $\}$}\leavevmode\par
{\hlstd \leavevmode\par
	}{\hlkwa public }{\hlstd }{\hlkwb void }{\hlstd }{\hlkwd handleCommandFromClientUI}{\hlstd }{\hlsym (}{\hlstd }{\hlkwc String}{\hlstd }{\hlsym [] }{\hlstd command}{\hlsym )$\{$}\leavevmode\par
{\hlstd }{\hlstd\ \ }{\hlstd }{\hlkwa try}{\hlstd }{\hlsym $\{$}\leavevmode\par
{\hlstd }{\hlstd\ \ \ }{\hlstd }{\hlkwa if}{\hlstd }{\hlsym (}{\hlstd command}{\hlsym [}{\hlstd }{\hlnum 0}{\hlstd }{\hlsym ].}{\hlstd }{\hlkwd equals}{\hlstd }{\hlsym (}{\hlstd }{\hlstr "\#quit"}{\hlstd }{\hlsym ))$\{$}\leavevmode\par
{\hlstd }{\hlstd\ \ \ \ }{\hlstd }{\hlkwa if}{\hlstd }{\hlsym (}{\hlstd isLogin}{\hlsym )}\leavevmode\par
{\hlstd }{\hlstd\ \ \ \ \ }{\hlstd }{\hlkwa this}{\hlstd }{\hlsym .}{\hlstd }{\hlkwd sendToServer}{\hlstd }{\hlsym (}{\hlstd }{\hlstr "\#logoff"}{\hlstd }{\hlsym );}\leavevmode\par
{\hlstd }{\hlstd\ \ \ \ }{\hlstd clientUI}{\hlsym .}{\hlstd }{\hlkwd display}{\hlstd }{\hlsym (}{\hlstd }{\hlstr "$\mathord{<}$System$\mathord{>}$ Session has ended."}{\hlstd }{\hlsym );}\leavevmode\par
{\hlstd }{\hlstd\ \ \ \ }{\hlstd }{\hlkwa this}{\hlstd }{\hlsym .}{\hlstd }{\hlkwd quit}{\hlstd }{\hlsym ();}\leavevmode\par
{\hlstd }{\hlstd\ \ \ }{\hlstd }{\hlsym $\}$}\leavevmode\par
{\hlstd }{\hlstd\ \ \ }{\hlstd }{\hlkwa else if}{\hlstd }{\hlsym (}{\hlstd command}{\hlsym [}{\hlstd }{\hlnum 0}{\hlstd }{\hlsym ].}{\hlstd }{\hlkwd equals}{\hlstd }{\hlsym (}{\hlstd }{\hlstr "\#logoff"}{\hlstd }{\hlsym ))$\{$}\leavevmode\par
{\hlstd }{\hlstd\ \ \ \ }{\hlstd }{\hlkwa if}{\hlstd }{\hlsym (}{\hlstd isLogin}{\hlsym )$\{$}\leavevmode\par
{\hlstd }{\hlstd\ \ \ \ \ }{\hlstd }{\hlkwa this}{\hlstd }{\hlsym .}{\hlstd }{\hlkwd sendToServer}{\hlstd }{\hlsym (}{\hlstd }{\hlstr "\#logoff"}{\hlstd }{\hlsym );}\leavevmode\par
{\hlstd }{\hlstd\ \ \ \ \ }{\hlstd }{\hlkwa this}{\hlstd }{\hlsym .}{\hlstd }{\hlkwd closeConnection}{\hlstd }{\hlsym ();}\leavevmode\par
{\hlstd }{\hlstd\ \ \ \ \ }{\hlstd isLogin}{\hlsym $\mathord{=}$}{\hlstd false}{\hlsym ;}\leavevmode\par
{\hlstd }{\hlstd\ \ \ \ \ }{\hlstd clientUI}{\hlsym .}{\hlstd }{\hlkwd display}{\hlstd }{\hlsym (}{\hlstd }{\hlstr "$\mathord{<}$System$\mathord{>}$ You have Logged off from the server."}{\hlstd }{\hlsym );}\leavevmode\par
{\hlstd }{\hlstd\ \ \ \ }{\hlstd }{\hlsym $\}$}\leavevmode\par
{\hlstd }{\hlstd\ \ \ \ }{\hlstd }{\hlkwa else }{\hlstd clientUI}{\hlsym .}{\hlstd }{\hlkwd display}{\hlstd }{\hlsym (}{\hlstd }{\hlstr "$\mathord{<}$System$\mathord{>}$ You have already logged off."}{\hlstd }{\hlsym );}\leavevmode\par
{\hlstd }{\hlstd\ \ \ }{\hlstd }{\hlsym $\}$}\leavevmode\par
{\hlstd }{\hlstd\ \ \ }{\hlstd }{\hlkwa else if}{\hlstd }{\hlsym (}{\hlstd command}{\hlsym [}{\hlstd }{\hlnum 0}{\hlstd }{\hlsym ].}{\hlstd }{\hlkwd equals}{\hlstd }{\hlsym (}{\hlstd }{\hlstr "\#sethost"}{\hlstd }{\hlsym ))$\{$}\leavevmode\par
{\hlstd }{\hlstd\ \ \ \ }{\hlstd }{\hlkwa if}{\hlstd }{\hlsym (}{\hlstd isLogin}{\hlsym ) }{\hlstd clientUI}{\hlsym .}{\hlstd }{\hlkwd display}{\hlstd }{\hlsym (}{\hlstd }{\hlstr "$\mathord{<}$System$\mathord{>}$ Please log off first"}{\hlstd }{\hlsym );}\leavevmode\par
{\hlstd }{\hlstd\ \ \ \ }{\hlstd }{\hlkwa else }{\hlstd }{\hlsym $\{$}\leavevmode\par
{\hlstd }{\hlstd\ \ \ \ \ }{\hlstd }{\hlkwa this}{\hlstd }{\hlsym .}{\hlstd }{\hlkwd setHost}{\hlstd }{\hlsym (}{\hlstd command}{\hlsym [}{\hlstd }{\hlnum 1}{\hlstd }{\hlsym ]);}\leavevmode\par
{\hlstd }{\hlstd\ \ \ \ \ }{\hlstd clientUI}{\hlsym .}{\hlstd }{\hlkwd display}{\hlstd }{\hlsym (}{\hlstd }{\hlstr "$\mathord{<}$System$\mathord{>}$ New host ("}{\hlstd  }{\hlsym $\mathord{+}$ }{\hlstd command}{\hlsym [}{\hlstd }{\hlnum 1}{\hlstd }{\hlsym ] $\mathord{+}$ }{\hlstd }{\hlstr ") has been set."}{\hlstd }{\hlsym );}\leavevmode\par
{\hlstd }{\hlstd\ \ \ \ }{\hlstd }{\hlsym $\}$}\leavevmode\par
{\hlstd }{\hlstd\ \ \ }{\hlstd }{\hlsym $\}$}\leavevmode\par
{\hlstd }{\hlstd\ \ \ }{\hlstd }{\hlkwa else if}{\hlstd }{\hlsym (}{\hlstd command}{\hlsym [}{\hlstd }{\hlnum 0}{\hlstd }{\hlsym ].}{\hlstd }{\hlkwd equals}{\hlstd }{\hlsym (}{\hlstd }{\hlstr "\#setport"}{\hlstd }{\hlsym ))$\{$}\leavevmode\par
{\hlstd }{\hlstd\ \ \ \ }{\hlstd }{\hlkwa if}{\hlstd }{\hlsym (}{\hlstd isLogin}{\hlsym ) }{\hlstd clientUI}{\hlsym .}{\hlstd }{\hlkwd display}{\hlstd }{\hlsym (}{\hlstd }{\hlstr "$\mathord{<}$System$\mathord{>}$ Please log off first"}{\hlstd }{\hlsym );}\leavevmode\par
{\hlstd }{\hlstd\ \ \ \ }{\hlstd }{\hlkwa else }{\hlstd }{\hlsym $\{$}\leavevmode\par
{\hlstd }{\hlstd\ \ \ \ \ }{\hlstd }{\hlkwa try}{\hlstd }{\hlsym $\{$}\leavevmode\par
{\hlstd }{\hlstd\ \ \ \ \ \ }{\hlstd }{\hlkwa this}{\hlstd }{\hlsym .}{\hlstd }{\hlkwd setPort}{\hlstd }{\hlsym (}{\hlstd }{\hlkwc Integer}{\hlstd }{\hlsym .}{\hlstd }{\hlkwd parseInt}{\hlstd }{\hlsym (}{\hlstd command}{\hlsym [}{\hlstd }{\hlnum 1}{\hlstd }{\hlsym ]));}\leavevmode\par
{\hlstd }{\hlstd\ \ \ \ \ \ }{\hlstd clientUI}{\hlsym .}{\hlstd }{\hlkwd display}{\hlstd }{\hlsym (}{\hlstd }{\hlstr "$\mathord{<}$System$\mathord{>}$ New port ("}{\hlstd  }{\hlsym $\mathord{+}$ }{\hlstd command}{\hlsym [}{\hlstd }{\hlnum 1}{\hlstd }{\hlsym ] $\mathord{+}$ }{\hlstd }{\hlstr ") has been set."}{\hlstd }{\hlsym );}\leavevmode\par
{\hlstd }{\hlstd\ \ \ \ \ }{\hlstd }{\hlsym $\}$}\leavevmode\par
{\hlstd }{\hlstd\ \ \ \ \ }{\hlstd }{\hlkwa catch}{\hlstd }{\hlsym (}{\hlstd }{\hlkwc NumberFormatException }{\hlstd e}{\hlsym )$\{$}\leavevmode\par
{\hlstd }{\hlstd\ \ \ \ \ \ }{\hlstd clientUI}{\hlsym .}{\hlstd }{\hlkwd display}{\hlstd }{\hlsym (}{\hlstd }{\hlstr "$\mathord{<}$System$\mathord{>}$ Invalid port"}{\hlstd }{\hlsym );}\leavevmode\par
{\hlstd }{\hlstd\ \ \ \ \ }{\hlstd }{\hlsym $\}$}\leavevmode\par
{\hlstd }{\hlstd\ \ \ \ }{\hlstd }{\hlsym $\}$}\leavevmode\par
{\hlstd }{\hlstd\ \ \ }{\hlstd }{\hlsym $\}$}\leavevmode\par
{\hlstd }{\hlstd\ \ \ }{\hlstd }{\hlkwa else if}{\hlstd }{\hlsym (}{\hlstd command}{\hlsym [}{\hlstd }{\hlnum 0}{\hlstd }{\hlsym ].}{\hlstd }{\hlkwd equals}{\hlstd }{\hlsym (}{\hlstd }{\hlstr "\#login"}{\hlstd }{\hlsym ))$\{$}\leavevmode\par
{\hlstd }{\hlstd\ \ \ \ }{\hlstd }{\hlkwa if}{\hlstd }{\hlsym (}{\hlstd isLogin}{\hlsym ) }{\hlstd clientUI}{\hlsym .}{\hlstd }{\hlkwd display}{\hlstd }{\hlsym (}{\hlstd }{\hlstr "$\mathord{<}$System$\mathord{>}$ You have already logged in."}{\hlstd }{\hlsym );}\leavevmode\par
{\hlstd }{\hlstd\ \ \ \ }{\hlstd }{\hlkwa else }{\hlstd }{\hlsym $\{$}\leavevmode\par
{\hlstd }{\hlstd\ \ \ \ \ }{\hlstd }{\hlkwa try}{\hlstd }{\hlsym $\{$ }{\hlstd }{\hlkwa this}{\hlstd }{\hlsym .}{\hlstd }{\hlkwd openConnection}{\hlstd }{\hlsym ();}\leavevmode\par
{\hlstd }{\hlstd\ \ \ \ \ }{\hlstd }{\hlkwa this}{\hlstd }{\hlsym .}{\hlstd }{\hlkwd sendToServer}{\hlstd }{\hlsym (}{\hlstd }{\hlstr "\#login "}{\hlstd  }{\hlsym $\mathord{+}$ }{\hlstd command}{\hlsym [}{\hlstd }{\hlnum 1}{\hlstd }{\hlsym ] $\mathord{+}$ }{\hlstd }{\hlstr " "}{\hlstd  }{\hlsym $\mathord{+}$ }{\hlstd command}{\hlsym [}{\hlstd }{\hlnum 2}{\hlstd }{\hlsym ]);}\leavevmode\par
{\hlstd }{\hlstd\ \ \ \ \ }{\hlstd }{\hlsym $\}$}\leavevmode\par
{\hlstd }{\hlstd\ \ \ \ \ }{\hlstd }{\hlkwa catch}{\hlstd }{\hlsym (}{\hlstd }{\hlkwc ArrayIndexOutOfBoundsException }{\hlstd e}{\hlsym )$\{$}\leavevmode\par
{\hlstd }{\hlstd\ \ \ \ \ \ }{\hlstd clientUI}{\hlsym .}{\hlstd }{\hlkwd display}{\hlstd }{\hlsym (}{\hlstd }{\hlstr "$\mathord{<}$System$\mathord{>}$ Invalid Input ."}{\hlstd }{\hlsym );}\leavevmode\par
{\hlstd }{\hlstd\ \ \ \ \ }{\hlstd }{\hlsym $\}$}\leavevmode\par
{\hlstd }{\hlstd\ \ \ \ }{\hlstd }{\hlsym $\}$}\leavevmode\par
{\hlstd }{\hlstd\ \ \ }{\hlstd }{\hlsym $\}$}\leavevmode\par
{\hlstd }{\hlstd\ \ \ }{\hlstd }{\hlkwa else if}{\hlstd }{\hlsym (}{\hlstd command}{\hlsym [}{\hlstd }{\hlnum 0}{\hlstd }{\hlsym ].}{\hlstd }{\hlkwd equals}{\hlstd }{\hlsym (}{\hlstd }{\hlstr "\#gethost"}{\hlstd }{\hlsym ))$\{$}\leavevmode\par
{\hlstd }{\hlstd\ \ \ \ }{\hlstd }{\hlkwa if}{\hlstd }{\hlsym (}{\hlstd isLogin}{\hlsym ) }{\hlstd clientUI}{\hlsym .}{\hlstd }{\hlkwd display}{\hlstd }{\hlsym (}{\hlstd }{\hlkwa this}{\hlstd }{\hlsym .}{\hlstd }{\hlkwd getHost}{\hlstd }{\hlsym ());}\leavevmode\par
{\hlstd }{\hlstd\ \ \ \ }{\hlstd }{\hlkwa else }{\hlstd clientUI}{\hlsym .}{\hlstd }{\hlkwd display}{\hlstd }{\hlsym (}{\hlstd }{\hlstr "$\mathord{<}$System$\mathord{>}$ You are currently not connected."}{\hlstd }{\hlsym );}\leavevmode\par
{\hlstd }{\hlstd\ \ \ }{\hlstd }{\hlsym $\}$}\leavevmode\par
{\hlstd }{\hlstd\ \ \ }{\hlstd }{\hlkwa else if}{\hlstd }{\hlsym (}{\hlstd command}{\hlsym [}{\hlstd }{\hlnum 0}{\hlstd }{\hlsym ].}{\hlstd }{\hlkwd equals}{\hlstd }{\hlsym (}{\hlstd }{\hlstr "\#getport"}{\hlstd }{\hlsym ))$\{$}\leavevmode\par
{\hlstd }{\hlstd\ \ \ \ }{\hlstd }{\hlkwa if}{\hlstd }{\hlsym (}{\hlstd isLogin}{\hlsym ) }{\hlstd clientUI}{\hlsym .}{\hlstd }{\hlkwd display}{\hlstd }{\hlsym (}{\hlstd }{\hlstr ""}{\hlstd }{\hlsym $\mathord{+}$}{\hlstd }{\hlkwa this}{\hlstd }{\hlsym .}{\hlstd }{\hlkwd getPort}{\hlstd }{\hlsym ());}\leavevmode\par
{\hlstd }{\hlstd\ \ \ \ }{\hlstd }{\hlkwa else }{\hlstd clientUI}{\hlsym .}{\hlstd }{\hlkwd display}{\hlstd }{\hlsym (}{\hlstd }{\hlstr "$\mathord{<}$System$\mathord{>}$ You are currently not connected."}{\hlstd }{\hlsym );}\leavevmode\par
{\hlstd }{\hlstd\ \ \ }{\hlstd }{\hlsym $\}$}\leavevmode\par
{\hlstd }{\hlstd\ \ \ }{\hlstd }{\hlkwa else if}{\hlstd }{\hlsym (}{\hlstd command}{\hlsym [}{\hlstd }{\hlnum 0}{\hlstd }{\hlsym ].}{\hlstd }{\hlkwd equals}{\hlstd }{\hlsym (}{\hlstd }{\hlstr "\#reg"}{\hlstd }{\hlsym ))$\{$}\leavevmode\par
{\hlstd }{\hlstd\ \ \ \ }{\hlstd clientUI}{\hlsym .}{\hlstd }{\hlkwd display}{\hlstd }{\hlsym (}{\hlstd }{\hlstr "$\mathord{<}$System$\mathord{>}$ Requesting ..."}{\hlstd }{\hlsym );}\leavevmode\par
{\hlstd }{\hlstd\ \ \ \ }{\hlstd }{\hlkwa this}{\hlstd }{\hlsym .}{\hlstd }{\hlkwd sendToServer}{\hlstd }{\hlsym (}{\hlstd command}{\hlsym [}{\hlstd }{\hlnum 0}{\hlstd }{\hlsym ] $\mathord{+}$ }{\hlstd }{\hlstr " "}{\hlstd  }{\hlsym $\mathord{+}$ }{\hlstd command}{\hlsym [}{\hlstd }{\hlnum 1}{\hlstd }{\hlsym ] $\mathord{+}$ }{\hlstd }{\hlstr " "}{\hlstd  }{\hlsym $\mathord{+}$ }{\hlstd command}{\hlsym [}{\hlstd }{\hlnum 2}{\hlstd }{\hlsym ] $\mathord{+}$ }{\hlstd }{\hlstr " "}{\hlstd  }{\hlsym $\mathord{+}$ }{\hlstd command}{\hlsym [}{\hlstd }{\hlnum 3}{\hlstd }{\hlsym ]);}\leavevmode\par
{\hlstd }{\hlstd\ \ \ }{\hlstd }{\hlsym $\}$}\leavevmode\par
{\hlstd }{\hlstd\ \ \ }{\hlstd }{\hlkwa else if}{\hlstd }{\hlsym (}{\hlstd command}{\hlsym [}{\hlstd }{\hlnum 0}{\hlstd }{\hlsym ].}{\hlstd }{\hlkwd equals}{\hlstd }{\hlsym (}{\hlstd }{\hlstr "\#regInfo"}{\hlstd }{\hlsym ))$\{$}\leavevmode\par
{\hlstd }{\hlstd\ \ \ \ }{\hlstd clientUI}{\hlsym .}{\hlstd }{\hlkwd display}{\hlstd }{\hlsym (}{\hlstd }{\hlstr "$\mathord{<}$System$\mathord{>}$ Sending infomation ..."}{\hlstd }{\hlsym );}\leavevmode\par
{\hlstd }{\hlstd\ \ \ \ }{\hlstd }{\hlkwa this}{\hlstd }{\hlsym .}{\hlstd }{\hlkwd sendToServer}{\hlstd }{\hlsym (}{\hlstd command}{\hlsym [}{\hlstd }{\hlnum 0}{\hlstd }{\hlsym ] $\mathord{+}$ }{\hlstd }{\hlstr " "}{\hlstd  }{\hlsym $\mathord{+}$ }{\hlstd command}{\hlsym [}{\hlstd }{\hlnum 1}{\hlstd }{\hlsym ]);}\leavevmode\par
{\hlstd }{\hlstd\ \ \ }{\hlstd }{\hlsym $\}$}\leavevmode\par
{\hlstd }{\hlstd\ \ \ }{\hlstd }{\hlkwa else }{\hlstd clientUI}{\hlsym .}{\hlstd }{\hlkwd display}{\hlstd }{\hlsym (}{\hlstd }{\hlstr "$\mathord{<}$System$\mathord{>}$ Command not found."}{\hlstd }{\hlsym );}\leavevmode\par
{\hlstd }{\hlstd\ \ }{\hlstd }{\hlsym $\}$}\leavevmode\par
{\hlstd }{\hlstd\ \ }{\hlstd }{\hlkwa catch}{\hlstd }{\hlsym (}{\hlstd }{\hlkwc IOException }{\hlstd e}{\hlsym )$\{$}\leavevmode\par
{\hlstd }{\hlstd\ \ \ }{\hlstd clientUI}{\hlsym .}{\hlstd }{\hlkwd display}{\hlstd }{\hlsym (}{\hlstd }{\hlstr "$\mathord{<}$System$\mathord{>}$ Could not reach server. Terminating client."}{\hlstd }{\hlsym );}\leavevmode\par
{\hlstd }{\hlstd\ \ \ }{\hlstd }{\hlkwd quit}{\hlstd }{\hlsym ();}\leavevmode\par
{\hlstd }{\hlstd\ \ }{\hlstd }{\hlsym $\}$}\leavevmode\par
{\hlstd 	}{\hlsym $\}$}\leavevmode\par
{\hlstd \leavevmode\par
	}{\hlkwa public }{\hlstd }{\hlkwb void }{\hlstd }{\hlkwd quit}{\hlstd }{\hlsym ()$\{$}\leavevmode\par
{\hlstd }{\hlstd\ \ }{\hlstd }{\hlkwa try}{\hlstd }{\hlsym $\{$}\leavevmode\par
{\hlstd }{\hlstd\ \ \ }{\hlstd }{\hlkwd closeConnection}{\hlstd }{\hlsym ();}\leavevmode\par
{\hlstd }{\hlstd\ \ }{\hlstd }{\hlsym $\}$}\leavevmode\par
{\hlstd }{\hlstd\ \ }{\hlstd }{\hlkwa catch}{\hlstd }{\hlsym (}{\hlstd }{\hlkwc IOException }{\hlstd e}{\hlsym )$\{$$\}$}\leavevmode\par
{\hlstd }{\hlstd\ \ }{\hlstd }{\hlkwc System}{\hlstd }{\hlsym .}{\hlstd }{\hlkwd exit}{\hlstd }{\hlsym (}{\hlstd }{\hlnum 0}{\hlstd }{\hlsym );}\leavevmode\par
{\hlstd 	}{\hlsym $\}$}\leavevmode\par
{\hlstd \leavevmode\par
	}{\hlkwa public }{\hlstd }{\hlkwb void }{\hlstd }{\hlkwd connectionException}{\hlstd }{\hlsym (}{\hlstd }{\hlkwc Exception }{\hlstd exception}{\hlsym )$\{$}\leavevmode\par
{\hlstd }{\hlstd\ \ }{\hlstd }{\hlkwa try}{\hlstd }{\hlsym $\{$}\leavevmode\par
{\hlstd }{\hlstd\ \ \ }{\hlstd }{\hlkwa this}{\hlstd }{\hlsym .}{\hlstd }{\hlkwd closeConnection}{\hlstd }{\hlsym ();}\leavevmode\par
{\hlstd }{\hlstd\ \ \ }{\hlstd isLogin}{\hlsym $\mathord{=}$}{\hlstd false}{\hlsym ;}\leavevmode\par
{\hlstd }{\hlstd\ \ \ }{\hlstd clientUI}{\hlsym .}{\hlstd }{\hlkwd display}{\hlstd }{\hlsym (}{\hlstd }{\hlstr "$\mathord{<}$System$\mathord{>}$ The connection to the Server ("}{\hlstd  }{\hlsym $\mathord{+}$ }{\hlstd }{\hlkwa this}{\hlstd }{\hlsym .}{\hlstd }{\hlkwd getHost}{\hlstd }{\hlsym () $\mathord{+}$ }{\hlstd }{\hlstr ":"}{\hlstd  }{\hlsym $\mathord{+}$ }{\hlstd }{\hlkwa this}{\hlstd }{\hlsym .}{\hlstd }{\hlkwd getPort}{\hlstd }{\hlsym () $\mathord{+}$ }{\hlstd }{\hlstr ") has been disconnected."}{\hlstd }{\hlsym );}\leavevmode\par
{\hlstd }{\hlstd\ \ }{\hlstd }{\hlsym $\}$}\leavevmode\par
{\hlstd }{\hlstd\ \ }{\hlstd }{\hlkwa catch}{\hlstd }{\hlsym (}{\hlstd }{\hlkwc IOException }{\hlstd e}{\hlsym )$\{$}\leavevmode\par
{\hlstd }{\hlstd\ \ \ }{\hlstd clientUI}{\hlsym .}{\hlstd }{\hlkwd display}{\hlstd }{\hlsym (}{\hlstd }{\hlstr "$\mathord{<}$System$\mathord{>}$ Unexpected error. Program terminates."}{\hlstd }{\hlsym );}\leavevmode\par
{\hlstd }{\hlstd\ \ \ }{\hlstd }{\hlkwd quit}{\hlstd }{\hlsym ();}\leavevmode\par
{\hlstd }{\hlstd\ \ }{\hlstd }{\hlsym $\}$}\leavevmode\par
{\hlstd 	}{\hlsym $\}$}\leavevmode\par
{\hlstd }{\hlsym $\}$}{\hlstd }\leavevmode\par
}
\bye
% TeX generated by Highlight 2.4.8, http://www.andre-simon.de/
